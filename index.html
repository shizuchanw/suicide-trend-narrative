<html>
	<script src='https://d3js.org/d3.v5.min.js'></script>
	<body onload="init()">
		<h2></h1>
		<svg width=600 height=600></svg>
	</body>

	<script>
		async function init() {

			//------------------------initialization------------------------//
			const korean_data = await d3.csv("https://raw.githubusercontent.com/shizuchanw/suicide-trend-narrative/main/cleaned-korean-data.csv");
			var svg = d3.select("svg");
			const margin = 100, 
				width = svg.attr("width") - margin*2,  
				height = svg.attr("height") - margin*2;
			var g = svg.append("g").attr("transform","translate(" + margin +"," + margin +")");


			//------------------------legend------------------------//
			// Title
        	svg.append('text')
        		.attr('x', 80)
        		.attr('y', 50)
        		.style('font-family', 'Helvetica')
        		.style('font-size', 18)
        		.text('Suicide Trend in South Korea from 1985 to 2015');


			// x axis
			var x = d3.scaleLinear()
      			.domain([1985, 2015])
      			.range([ 0, width ]);
    		g.append("g")
      			.attr("transform", "translate(0," + height + ")")
      			.call(d3.axisBottom(x).tickFormat(d3.format("d")));
      		// X label
        	g.append('text')
        		.attr('x', width - 50)
        		.attr('y', height + 50)
        		.text('Year');

    		// y axis
    		var y = d3.scaleLinear()
      			.domain([0, d3.max(korean_data, function(d) { return d.suicide_per100k; })])
      			.range([ height, 0 ]);
    		g.append("g").call(d3.axisLeft(y));
    		// Y label
        	g.append('text')
        		.attr('transform', 'translate(-50, 200) rotate(-90)')
        		.text('Suicide Cases / 100K population');

        	//------------------------scatter plot------------------------//
        	g.append('g')
        		.selectAll("dot")
        		.data(korean_data)
        		.enter()
        		.append("circle")
        		.attr("cx", function (d) { return x(d.year); } )
        		.attr("cy", function (d) { return y(d.suicide_per100k); } )
        		.attr("r", 2)
        		.style("fill", "#CC0000");


      		//------------------------line chart------------------------//
      		var line = d3.line()
        		.x(function(d) { return x(d.year); }) 
        		.y(function(d) { return y(d.suicide_per100k); }) 
        		.curve(d3.curveMonotoneX)
        
        		g.append("path")
        		.datum(korean_data) 
        		.attr("d", line)
        		.style("fill", "none")
        		.style("stroke", "steelblue")
        		.style("stroke-width", "1.5");
		}
	</script>
	<br>
	<a href="" style="margin-left: 100px;"><button>Next</button></a>
</html>